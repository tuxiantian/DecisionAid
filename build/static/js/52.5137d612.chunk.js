"use strict";(self.webpackChunkdecision_app=self.webpackChunkdecision_app||[]).push([[52],{6022:(t,e,a)=>{function i(t,e){var a,i,n;t.accDescr&&(null===(a=e.setAccDescription)||void 0===a||a.call(e,t.accDescr));t.accTitle&&(null===(i=e.setAccTitle)||void 0===i||i.call(e,t.accTitle));t.title&&(null===(n=e.setDiagramTitle)||void 0===n||n.call(e,t.title))}a.d(e,{S:()=>i}),(0,a(1020).K2)(i,"populateCommonDb")},3052:(t,e,a)=>{a.d(e,{diagram:()=>b});var i=a(6022),n=a(7039),c=a(4752),l=a(1020),o=a(5502),r=a(963),s=l.UI.pie,d={sections:new Map,showData:!1,config:s},p=d.sections,u=d.showData,g=structuredClone(s),h=(0,l.K2)((()=>structuredClone(g)),"getConfig"),m=(0,l.K2)((()=>{p=new Map,u=d.showData,(0,l.IU)()}),"clear"),f=(0,l.K2)((t=>{let{label:e,value:a}=t;p.has(e)||(p.set(e,a),l.Rm.debug("added new section: ".concat(e,", with value: ").concat(a)))}),"addSection"),S=(0,l.K2)((()=>p),"getSections"),x=(0,l.K2)((t=>{u=t}),"setShowData"),w=(0,l.K2)((()=>u),"getShowData"),D={getConfig:h,clear:m,setDiagramTitle:l.ke,getDiagramTitle:l.ab,setAccTitle:l.SV,getAccTitle:l.iN,setAccDescription:l.EI,getAccDescription:l.m7,addSection:f,getSections:S,setShowData:x,getShowData:w},v=(0,l.K2)(((t,e)=>{(0,i.S)(t,e),e.setShowData(t.showData),t.sections.map(e.addSection)}),"populateDb"),T={parse:(0,l.K2)((async t=>{const e=await(0,o.qg)("pie",t);l.Rm.debug(e),v(e,D)}),"parse")},y=(0,l.K2)((t=>"\n  .pieCircle{\n    stroke: ".concat(t.pieStrokeColor,";\n    stroke-width : ").concat(t.pieStrokeWidth,";\n    opacity : ").concat(t.pieOpacity,";\n  }\n  .pieOuterCircle{\n    stroke: ").concat(t.pieOuterStrokeColor,";\n    stroke-width: ").concat(t.pieOuterStrokeWidth,";\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ").concat(t.pieTitleTextSize,";\n    fill: ").concat(t.pieTitleTextColor,";\n    font-family: ").concat(t.fontFamily,";\n  }\n  .slice {\n    font-family: ").concat(t.fontFamily,";\n    fill: ").concat(t.pieSectionTextColor,";\n    font-size:").concat(t.pieSectionTextSize,";\n    // fill: white;\n  }\n  .legend text {\n    fill: ").concat(t.pieLegendTextColor,";\n    font-family: ").concat(t.fontFamily,";\n    font-size: ").concat(t.pieLegendTextSize,";\n  }\n")),"getStyles"),C=(0,l.K2)((t=>{const e=[...t.entries()].map((t=>({label:t[0],value:t[1]}))).sort(((t,e)=>e.value-t.value));return(0,r.rLf)().value((t=>t.value))(e)}),"createPieArcs"),b={parser:T,db:D,renderer:{draw:(0,l.K2)(((t,e,a,i)=>{var o;l.Rm.debug("rendering pie chart\n"+t);const s=i.db,d=(0,l.D7)(),p=(0,n.$t)(s.getConfig(),d.pie),u=18,g=450,h=g,m=(0,c.D)(e),f=m.append("g");f.attr("transform","translate(225,225)");const{themeVariables:S}=d;let[x]=(0,n.I5)(S.pieOuterStrokeWidth);null!==(o=x)&&void 0!==o||(x=2);const w=p.textPosition,D=Math.min(h,g)/2-40,v=(0,r.JLW)().innerRadius(0).outerRadius(D),T=(0,r.JLW)().innerRadius(D*w).outerRadius(D*w);f.append("circle").attr("cx",0).attr("cy",0).attr("r",D+x/2).attr("class","pieOuterCircle");const y=s.getSections(),b=C(y),k=[S.pie1,S.pie2,S.pie3,S.pie4,S.pie5,S.pie6,S.pie7,S.pie8,S.pie9,S.pie10,S.pie11,S.pie12],K=(0,r.UMr)(k);f.selectAll("mySlices").data(b).enter().append("path").attr("d",v).attr("fill",(t=>K(t.data.label))).attr("class","pieCircle");let A=0;y.forEach((t=>{A+=t})),f.selectAll("mySlices").data(b).enter().append("text").text((t=>(t.data.value/A*100).toFixed(0)+"%")).attr("transform",(t=>"translate("+T.centroid(t)+")")).style("text-anchor","middle").attr("class","slice"),f.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const R=f.selectAll(".legend").data(K.domain()).enter().append("g").attr("class","legend").attr("transform",((t,e)=>"translate(216,"+(22*e-22*K.domain().length/2)+")"));R.append("rect").attr("width",u).attr("height",u).style("fill",K).style("stroke",K),R.data(b).append("text").attr("x",22).attr("y",14).text((t=>{const{label:e,value:a}=t.data;return s.getShowData()?"".concat(e," [").concat(a,"]"):e}));const z=512+Math.max(...R.selectAll("text").nodes().map((t=>{var e;return null!==(e=null===t||void 0===t?void 0:t.getBoundingClientRect().width)&&void 0!==e?e:0})));m.attr("viewBox","0 0 ".concat(z," ").concat(g)),(0,l.a$)(m,g,z,p.useMaxWidth)}),"draw")},styles:y}}}]);
//# sourceMappingURL=52.5137d612.chunk.js.map